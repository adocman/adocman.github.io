---
layout: default
title: Jardín
permalink: /jardin/
---

<section class="bg-[#F9F9F9] text-[#141414] px-6 xl:px-50 lg:px-30 md:px-20 py-50">
  <div class="mb-12 text-center">
    <h1 class="text-5xl font-serif mt-2">Jardín</h1>
    <p class="mt-4 text-xl max-w-2xl mx-auto text-[#141414]">
      Colección de notas, ensayos y artículos.
    </p>
  </div>

  <div class="flex flex-wrap justify-center gap-4 mb-16 items-center">
    <div class="flex gap-2 flex-wrap justify-center" role="group" aria-label="Filtrar por tipo">
      <button class="filter-btn text-sm font-medium px-4 py-2 rounded border border-[#F3F6F4] hover:bg-[#F3F6F4] transition active" data-type="all">Todos</button>
      <button class="filter-btn text-sm font-medium px-4 py-2 rounded border border-[#F3F6F4] hover:bg-[#F3F6F4] transition" data-type="nota">Notas</button>
      <button class="filter-btn text-sm font-medium px-4 py-2 rounded border border-[#F3F6F4] hover:bg-[#F3F6F4] transition" data-type="ensayo">Ensayos</button>
      <button class="filter-btn text-sm font-medium px-4 py-2 rounded border border-[#F3F6F4] hover:bg-[#F3F6F4] transition" data-type="articulo">Artículos</button>
    </div>

    <div class="relative">
      <label for="pilar-filter" class="sr-only">Filtrar por pilar</label>
      <select id="pilar-filter" class="border border-[#F3F6F4] px-4 py-2 rounded text-sm bg-white text-[#141414] focus:outline-none focus:ring-2 focus:ring-[#4A6C6F] transition">
        <option value="">Pilares</option>
        <option value="logos">Logos</option>
        <option value="pathos">Pathos</option>
        <option value="ethos">Ethos</option>
      </select>
    </div>
  </div>

  <div id="publicaciones-grid" class="columns-1 lg:columns-2 xl:columns-3 xl:px-50 gap-6 mx-auto space-y-6">
    {% assign publicaciones = site.posts %}
    {% for post in publicaciones %}
      {% assign type = post.type | downcase %}
      {% assign type_label = "" %}
      {% case type %}
        {% when "nota" %} {% assign type_label = "Nota" %}
        {% when "ensayo" %} {% assign type_label = "Ensayo" %}
        {% when "articulo" %} {% assign type_label = "Artículo" %}
        {% else %} {% assign type_label = type %}
      {% endcase %}

      <article
        class="publicacion break-inside-avoid rounded-md border border-[#F3F6F4] p-5 space-y-3 transition-all duration-300 opacity-0"
        data-type="{{ type }}"
        data-pilar="{{ post.pilar | downcase }}"
      >
        <a href="{{ post.url }}" class="group block hover:text-[#4A6C6F] transition-colors duration-200">
          {% if post.image %}
            <img src="{{ post.image | relative_url }}" alt="{{ post.title }}" class="rounded-md aspect-[3/2] object-cover w-full mb-4 transition-transform duration-300 group-hover:scale-105">
          {% endif %}

          <h3 class="text-lg font-semibold leading-snug">{{ post.title }}</h3>

          <p class="text-sm text-[#BCBCBC] leading-relaxed">
            {{ post.description | default: post.excerpt | truncatewords: 20 }}
          </p>

          <div class="mt-2 space-y-1 text-sm text-[#BCBCBC]">
            <div>
              <time datetime="{{ post.date | date: '%Y-%m-%d' }}" class="relative-date" data-date="{{ post.date | date_to_xmlschema }}">
                {{ post.date | date: '%b %d, %Y' }}
              </time>
            </div>
            <div class="flex items-center justify-between text-sm text-[#BCBCBC]">
              {% if post.pilar %}
                <div class="capitalize">Pilar: <span class="font-medium">{{ post.pilar }}</span></div>
              {% endif %}
              <div class="tracking-wide text-xs text-[#F3F6F4]">{{ type_label }}</div>
            </div>

          </div>
        </a>
      </article>

    {% endfor %}
  </div>
</section>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const filterButtons = document.querySelectorAll('.filter-btn');
    const publicaciones = document.querySelectorAll('.publicacion');
    const pilarFilter = document.getElementById('pilar-filter');

    let activeType = 'all';

    // Animación de entrada inicial con GSAP
    gsap.to(".publicacion", {
      opacity: 1,
      y: 0,
      duration: 0.8,
      stagger: 0.15,
      ease: "power2.out"
    });
    
    // Configura el estado inicial del botón activo
    const initialActiveButton = document.querySelector('.filter-btn[data-type="all"]');
    if (initialActiveButton) {
      gsap.set(initialActiveButton, { backgroundColor: '#4A6C6F', color: 'white' });
    }

    filterButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        activeType = btn.dataset.type;

        // Anima todos los botones para volver al estado inactivo
        gsap.to(filterButtons, {
          backgroundColor: '#F9F9F9', // Color de fondo inactivo
          color: '#141414', // Color de texto inactivo
          duration: 0.3,
          ease: 'power2.inOut',
          onComplete: () => {
             // Después de la animación, elimina la clase 'active' de todos
             filterButtons.forEach(b => b.classList.remove('active'));
             btn.classList.add('active');
          }
        });

        // Anima el botón seleccionado al estado activo
        gsap.to(btn, {
          backgroundColor: '#4A6C6F', // Color de fondo activo
          color: 'white', // Color de texto activo
          duration: 0.3,
          ease: 'power2.inOut'
        });

        applyFilters();
      });
    });

    pilarFilter.addEventListener('change', applyFilters);

    function applyFilters() {
      const selectedPilar = pilarFilter.value;

      publicaciones.forEach(pub => {
        const postType = pub.dataset.type;
        const postPilar = pub.dataset.pilar;
        const matchesType = activeType === 'all' || postType === activeType;
        const matchesPilar = !selectedPilar || postPilar === selectedPilar;
        const shouldShow = matchesType && matchesPilar;

        if (shouldShow) {
          gsap.to(pub, { opacity: 1, y: 0, duration: 0.5, display: 'block' });
        } else {
          gsap.to(pub, { opacity: 0, y: 20, duration: 0.3, onComplete: () => pub.style.display = 'none' });
        }
      });
    }
  });
</script>