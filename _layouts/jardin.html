---
layout: default
title: Jardín
permalink: /jardin/
---

<section class="bg-[#FAF7F2] text-gray-900 px-6 md:px-50 py-20">
  <div class="mb-12 text-center">
    <h1 class="text-5xl font-serif mt-2">Jardín</h1>
    <p class="mt-4 text-xl max-w-2xl mx-auto text-gray-700">
      Colección de notas, ensayos y artículos.
    </p>
  </div>

  <!-- Filtros -->
  <div class="flex flex-wrap justify-center gap-4 mb-12 items-center">
    <!-- Filtros por tipo (estilo igual a jardin.html) -->
    <div class="flex gap-2 flex-wrap justify-center">
      <button class="filter-btn text-sm font-medium px-4 py-2 rounded border border-gray-300 hover:bg-gray-200 transition active" data-type="all">Todos</button>
      <button class="filter-btn text-sm font-medium px-4 py-2 rounded border border-gray-300 hover:bg-gray-200 transition" data-type="nota">Notas</button>
      <button class="filter-btn text-sm font-medium px-4 py-2 rounded border border-gray-300 hover:bg-gray-200 transition" data-type="ensayo">Ensayos</button>
      <button class="filter-btn text-sm font-medium px-4 py-2 rounded border border-gray-300 hover:bg-gray-200 transition" data-type="articulo">Artículos</button>
    </div>

    <!-- Dropdown por pilar -->
    <div class="relative">
      <select id="pilar-filter" class="border px-4 py-2 rounded text-sm bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-300 transition">
        <option value="">Pilar (todos)</option>
        <option value="stem">STEM</option>
        <option value="idiomas">Idiomas</option>
        <option value="conocimiento">Conocimiento</option>
        <option value="filosofia">Filosofía</option>
      </select>
    </div>
  </div>

  <!-- Grid-->
  <div id="publicaciones-grid" class="columns-1 md:columns-2 lg:columns-3 gap-6 mx-auto space-y-6">
    {% assign publicaciones = site.posts %}
    {% for post in publicaciones %}

    {% assign type = post.type | downcase %}
    {% assign type_label = "" %}
    {% case type %}
      {% when "nota" %} {% assign type_label = "Nota" %}
      {% when "ensayo" %}       {% assign type_label = "Ensayo" %}
      {% when "articulo" %}      {% assign type_label = "Artículo" %}
      {% else %}                {% assign type_label = type %}
    {% endcase %}

    <article class="break-inside-avoid rounded-md border border-gray-200 p-5 space-y-4 publicacion transition-all duration-300"
            data-type="{{ type }}"
            data-pilar="{{ post.pilar | downcase }}">

      {% if post.image %}
        <img src="{{ post.image | relative_url }}" alt="{{ post.title }}" class="rounded-md aspect-[3/2] object-cover w-full mb-4">
      {% endif %}

      <div class="flex items-center justify-between">
        <time datetime="{{ post.date | date: '%Y-%m-%d' }}" class="text-sm text-gray-500 relative-date" data-date="{{ post.date | date_to_xmlschema }}">{{ post.date | date: '%b %d, %Y' }}</time>
        <span class="text-xs uppercase tracking-wide text-gray-400">{{ type_label }}</span>
      </div>

      <h3 class="text-lg font-semibold leading-snug">
        <a href="{{ post.url }}" class="hover:text-[#4A6C6F] transition">{{ post.title }}</a>
      </h3>

      <p class="text-sm text-gray-600 leading-relaxed">
        {{ post.description | default: post.excerpt | truncatewords: 20 }}
      </p>
    </article>

    {% endfor %}
  </div>


</section>

<script>
  const filterButtons = document.querySelectorAll('.filter-btn');
  const publicaciones = document.querySelectorAll('.publicacion');
  const pilarFilter = document.getElementById('pilar-filter');

  let activeType = 'all'; // Solo un tipo activo a la vez

  filterButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      activeType = btn.dataset.type;

      // Remueve clase activa de todos los botones
      filterButtons.forEach(b => b.classList.remove('bg-gray-200', 'font-semibold', 'active'));

      // Activa solo el botón clickeado
      btn.classList.add('bg-gray-200', 'font-semibold', 'active');

      applyFilters();
    });
  });

  pilarFilter.addEventListener('change', applyFilters);

  function applyFilters() {
    const selectedPilar = pilarFilter.value;

    publicaciones.forEach(pub => {
      const postType = pub.dataset.type;
      const postPilar = pub.dataset.pilar;

      const matchesType = activeType === 'all' || postType === activeType;
      const matchesPilar = !selectedPilar || postPilar === selectedPilar;

      pub.style.display = (matchesType && matchesPilar) ? 'block' : 'none';
    });
  }
</script>

